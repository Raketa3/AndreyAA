-- Страны
create table if not exists countries (
    country_id serial primary KEY,
    country_name varchar(80) not null,
    visa_required boolean default false,
    climate varchar(50)
);
-- Тип тура
create table if not exists tour_types (
    type_id serial primary key,
    type_name varchar(40) not null,
    description text
);
-- Клиенты
create table if not exists clients (
    client_id serial primary key,
    full_name varchar(80) not null,
    passport_number varchar(15) unique not null,
    phone varchar(15),
    email varchar(60)
);
-- Отели
Create table if not exists hotels (
    hotel_id SERIAL primary key,
    hotel_name varchar(80) not null,
    country_id integer not null,
    star_rating integer check (star_rating between 1 and 5),
    foreign key (country_id) references countries(country_id)
);
-- Заказы
create table if not exists orders (
    order_id serial primary key,
    client_id integer not null,
    type_id integer not null,
    country_id integer not null,
    hotel_id integer,
    order_date DATE not null,
    start_date DATE not null,
    end_date DATE not null,
    price numeric(10,2) not null,
    payment_status varchar (20) not null default 'не оплачено'
        check (payment_status in ('оплачено','не оплачено','частично')),
    foreign key (client_id) references clients(client_id),
    foreign key (country_id) references countries(country_id),
    foreign key (type_id) references tour_types(type_id),
    foreign key (hotel_id) references hotels(hotel_id)
);
