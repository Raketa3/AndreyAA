CREATE TABLE public.clients (
  client_id integer NOT NULL DEFAULT nextval('clients_client_id_seq'::regclass),
  full_name character varying NOT NULL,
  passport_number character varying NOT NULL UNIQUE,
  phone character varying,
  email character varying,
  CONSTRAINT clients_pkey PRIMARY KEY (client_id)
);
CREATE TABLE public.countries (
  country_id integer NOT NULL DEFAULT nextval('countries_country_id_seq'::regclass),
  country_name character varying NOT NULL,
  visa_required boolean DEFAULT false,
  climate character varying,
  CONSTRAINT countries_pkey PRIMARY KEY (country_id)
);
CREATE TABLE public.hotels (
  hotel_id integer NOT NULL DEFAULT nextval('hotels_hotel_id_seq'::regclass),
  hotel_name character varying NOT NULL,
  country_id integer NOT NULL,
  star_rating integer CHECK (star_rating >= 1 AND star_rating <= 5),
  CONSTRAINT hotels_pkey PRIMARY KEY (hotel_id),
  CONSTRAINT hotels_country_id_fkey FOREIGN KEY (country_id) REFERENCES public.countries(country_id)
);
CREATE TABLE public.orders (
  order_id integer NOT NULL DEFAULT nextval('orders_order_id_seq'::regclass),
  client_id integer NOT NULL,
  type_id integer NOT NULL,
  country_id integer NOT NULL,
  hotel_id integer,
  order_date date NOT NULL,
  start_date date NOT NULL,
  end_date date NOT NULL,
  price numeric NOT NULL,
  payment_status character varying NOT NULL DEFAULT 'не оплачено'::character varying CHECK (payment_status::text = ANY (ARRAY['оплачено'::character varying::text, 'не оплачено'::character varying::text, 'частично'::character varying::text])),
  CONSTRAINT orders_pkey PRIMARY KEY (order_id),
  CONSTRAINT orders_type_id_fkey FOREIGN KEY (type_id) REFERENCES public.tour_types(type_id),
  CONSTRAINT orders_country_id_fkey FOREIGN KEY (country_id) REFERENCES public.countries(country_id),
  CONSTRAINT orders_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.clients(client_id),
  CONSTRAINT orders_hotel_id_fkey FOREIGN KEY (hotel_id) REFERENCES public.hotels(hotel_id)
);
CREATE TABLE public.tour_types (
  type_id integer NOT NULL DEFAULT nextval('tour_types_type_id_seq'::regclass),
  type_name character varying NOT NULL,
  description text,
  CONSTRAINT tour_types_pkey PRIMARY KEY (type_id)
);
